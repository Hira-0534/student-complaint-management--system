<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Dashboard | SCMS</title>
    <link rel="stylesheet" href="css/student.css">
</head>
<body>
    <nav class="sidebar">
        <div class="logo">welcome to  SCMS student portal</div>
        <div class="nav-menu">
            <div class="nav-item active" onclick="showSection('dashSection', this)">ğŸ“Š Dashboard</div>
            <div class="nav-item" onclick="showSection('viewSection', this)">ğŸ“‹ My Complaints</div>
            <div class="nav-item" onclick="showSection('addSection', this)">â• New Complaint</div>
            <div class="nav-item" onclick="showSection('statusSection', this)">ğŸ” Check Status</div>
            
            <div class="nav-item" onclick="showSection('deleteSection', this)">ğŸ—‘ï¸ Delete Complaint</div>
            
            <div class="nav-item" onclick="toggleAccountMenu()">âš™ï¸ Account Settings â–¾</div>
            <div id="account-submenu" style="display: none; padding-left: 20px;">
                <div class="nav-item sub-item" onclick="showSection('profileSection', this)">ğŸ‘¤ Profile</div>
                <div class="nav-item sub-item" onclick="showSection('passwordSection', this)">ğŸ”’ Change Password</div>
                </div>
        </div>
        <div class="user-footer">
            <div id="userDisplay" style="font-weight: bold; color: white; font-size: 16px;">Loading...</div>
            <div onclick="logout()" style="color: #ffbbbb; cursor: pointer; font-size: 13px; margin-top:10px;">ğŸšª Sign Out</div>
        </div>
    </nav>

    <main class="main-content">
        <div class="container">
            <section id="dashSection">
                <h2 id="welcome-msg" style="font-size: 28px; color: #1e293b;">Welcome!</h2>
                <div class="stats-grid" style="display: flex; gap: 20px; margin-top: 20px;">
                    <div class="stat-box" style="background: linear-gradient(135deg, #4f46e5, #3730a3); color: white; padding: 25px; border-radius: 12px; flex: 1; text-align: center;">
                        <h3 id="dash-total" style="font-size: 32px;">0</h3>
                        <p>Total Complaints</p>
                    </div>
                    <div class="stat-box" style="background: linear-gradient(135deg, #10b981, #059669); color: white; padding: 25px; border-radius: 12px; flex: 1; text-align: center;">
                        <h3 id="dash-resolved" style="font-size: 32px;">0</h3>
                        <p>Resolved</p>
                    </div>
                </div>
            </section>

            <section id="profileSection" style="display: none;">
                <div class="card">
                    <h2 style="border-bottom: 2px solid #eee; padding-bottom: 10px; margin-bottom: 15px;">ğŸ‘¤ My Official Profile</h2>
                    <div style="line-height: 2;">
                        <p><strong>Roll Number / Username:</strong> <span id="prof-name" style="color: #4f46e5; font-weight: bold;"></span></p>
                        <p><strong>Account Role:</strong> <span id="prof-role">Student</span></p>
                        <p><strong>Current Session:</strong> <span id="prof-session">FA23</span></p>
                    </div>
                </div>
            </section>

            <section id="addSection" style="display: none;">
                <div class="card">
                    <h2>â• Submit New Complaint</h2>
                    <input type="text" id="titleInput" placeholder="Complaint Title" style="width: 100%; padding: 10px; margin-bottom: 15px;">
                    <textarea id="descInput" placeholder="Detailed Description..." style="width: 100%; height: 100px; padding: 10px; margin-bottom: 15px;"></textarea>
                    <label style="font-size: 14px; font-weight: bold;">Select Category:</label>
                    <select id="catInput" style="width: 100%; padding: 10px; margin-bottom: 15px;">
                        <option value="">-- Select --</option>
                        <option value="Academic">Academic</option>
                        <option value="Facility">Facility</option>
                        <option value="Administrative">Administrative</option>
                        <option value="Examination">Examination</option>
                    </select>
                    <button type="button" onclick="submitOfficialComplaint()" style="width: 100%; padding: 12px; background: #4f46e5; color: white; border: none; border-radius: 6px; cursor: pointer;">Submit Complaint</button>
                </div>
            </section>

            <section id="viewSection" style="display: none;">
                <h2 style="margin-bottom: 20px;">ğŸ“‹ My Complaints History</h2>
                <div id="complaintsList"></div>
            </section>

           <section id="statusSection" style="display: none;">
    <div class="card">
        <h2>ğŸ” Track Record</h2>
        <div style="display: flex; gap: 10px; margin-top: 15px;">
            <input type="number" id="idSearch" placeholder="Enter ID" style="width: 150px; padding: 10px; margin-bottom: 0;">
            <button onclick="checkStatus()" style="width: auto; padding: 10px 25px;">Search</button>
        </div>
        <div id="statusResult" style="margin-top: 20px;"></div>
    </div>
</section>

            <section id="deleteSection" style="display: none;">
                <div class="card">
                    <h2>ğŸ—‘ï¸ Delete Complaint</h2>
                    <div style="display: flex; gap: 10px; margin-top: 15px;">
                        <input type="number" id="idDelete" placeholder="ID" style="width: 100px; padding: 10px;">
                        <button onclick="deleteComplaintById()" style="padding: 10px 25px; background: #ef4444; color: white; border-radius: 6px; cursor: pointer; border: none;">Delete</button>
                    </div>
                    <div id="deleteResult"></div>
                </div>
            </section>

            <section id="passwordSection" style="display: none;">
    <div class="card">
        <h2>ğŸ”’ Secure Password Update</h2>
        <input type="password" id="oldPassInput" placeholder="Current Password" style="width: 100%; padding: 10px; margin-bottom: 10px;">
        <input type="password" id="newPassInput" placeholder="New Password" style="width: 100%; padding: 10px; margin-bottom: 10px;">
        <input type="password" id="confirmPassInput" placeholder="Confirm New Password" style="width: 100%; padding: 10px; margin-bottom: 10px;">
        
        <button class="btn-update" onclick="updatePassword()" style="width: 100%; padding: 12px; background: #ef4444; color: white; border: none; border-radius: 6px; cursor: pointer;">Update Password Now</button>
    </div>
</section>

            </div>
    </main>
    <script src="js/student.js"></script>
</body>
</html>